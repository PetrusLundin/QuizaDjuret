@page "/"
@using QuizaDjuret.Client.Managers;
@using QuizaDjuret.Client.Services;
@using QuizaDjuret.Shared;
@inject QuizService quizService

@* HTML HÄR *@

@*<h1>@text</h1>*@

<head>
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Almarai&family=Bubblegum+Sans&family=Caveat&family=Cherry+Bomb+One&family=Gochi+Hand&family=Ysabeau+SC:wght@600;700&display=swap" rel="stylesheet">


</head>

@if(GameManager.CurrentQuestion == 0)
{
	<style>
		body{
			background-image: url('../images/djur.jpg');
			background-size: cover;
		}
	</style>



		<div class="main-box">

		<h1 style="margin-bottom: 40px; margin-top: 30px;">Välkommen till QuizaDjuret</h1>
		<h2 style="margin-bottom: 45px;">Hur du spelar Quizet:</h2>
		<p>🏆 Rätt svar på första försöket ger: 100 poäng</p>
		<p>🏆 Rätt svar på andra försöket ger: 50 poäng</p>
		<p>🏆 Rätt svar på tredje försöket ger: 0 poäng</p>
		<p>🔍 Tryck på knappen "ledtråd" för att få en ledtråd till frågan</p>
		<p>🔍 Tryck på knappen "börja om" för att börja om quizet från början</p>


		<h3 style="margin: 40px;">Lycka till!! 🐛</h3>
	
	
	</div>
	<div class="start-btn-div">
		<button class="start-btn" @onclick="() => Click()">Starta Quizet</button>
        </div>
  
}
else

{
	<style>
		body {
			background-image: url('../images/92.jpg');
			background-size: cover;
		}
	</style>



	<div class="main-box-frågor">
		<div class="rubrik-box">
        <h1 style="margin-bottom: 20px; margin-top: 20px;">@GameManager.CurrentQuestionText</h1>
		</div>


		<div class="fråge-box">
			<div class="test-box-btn">
				<button class="test-btn">bilden</button>
			</div>
			<div class="">
            <p>Apa</p>
            <p>Elefant</p>
            <p>Lodjur</p>
			</div>
        </div>


        <div class="nästafråga-btn-div">
            <button class="start-btn" @onclick="() => Click()">Nästa </button>
        </div>
		
	
	</div>

  <button @onclick="() => Restart()">Starta om ditt svin</button>
}



@code
{
    private bool isStarted = false;

    private string text = "Hej på dig";

    public string loading = "Loading...";

    private int questionId = 1;

    protected override async Task OnInitializedAsync()
    {
        // GameManager.Question = await quizService.Testget(1);
        GameManager.Questions = await quizService.GetAllAsync();
        GameManager.Answers = await quizService.GetAnswers(questionId);
    }

    public void Click()
    {
        GameManager.NextQuestion();
    }

    public void Restart()
    {
        GameManager.ResetQuiz();
    }
}